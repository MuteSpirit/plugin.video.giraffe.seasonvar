# coding: utf-8

import os.path
import json
from glob import glob

def day_items(datestr):
    '''Collect all dayblock items(i.e episode changes) for a given date
    and yields dict {'url': ..., 'name': ..., 'changes': ...} for each
    episode for that date.

    datestr should be in format 'dd.mm.yyyy'
    '''
    yield {}


class Cache:
    def __init__(self, cache_dir_path):
        self._cdpath = cache_dir_path
        self._dayblocks_glob = os.path.join(self._cdpath, "*.json")

    def _main_page_dayblocks(self):
        for f in glob(self._dayblocks_glob):
            fname, _ = os.path.splitext(os.path.basename(f))
            print(fname, f)
            with open(f, "rb") as fo:
                yield fname, json.load(fo)
